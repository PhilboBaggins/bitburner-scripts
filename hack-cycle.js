import { scanAndRun } from 'common.js'

/** @param {NS} ns **/
export async function main(ns) {
    const args = ns.flags([['help', false]]);
    if (args.help) {
        ns.tprint('??????????????????????????????????');
        ns.tprint('??????????????????????????????????');
        ns.tprint('??????????????????????????????????');
        ns.tprint(`Usage: run ${ns.getScriptName()}`);
        return;
    }

    ns.disableLog('scan');
    ns.disableLog('getHackingLevel');
    ns.disableLog('getServerRequiredHackingLevel');

    while (true) {
        await scanAndRun(ns, async function (hostname) {
            if ((ns.getHackingLevel() >= ns.getServerRequiredHackingLevel(hostname))
             && (ns.getServer(hostname).moneyAvailable > 0.0)) {
                await ns.hack(hostname);
            }
        });
    }
}
